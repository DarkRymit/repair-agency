<th:block xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
    <td th:fragment="response-rating(response)">
        <th:block th:each="i: ${#numbers.sequence(1, response.rating)}">
            <i class="fa-solid fa-star"></i>
        </th:block>
    </td>
    <td th:fragment="response-id(response)">
        <a class=" text-dark text-decoration-none"
           th:href="'/order/'+${response.receipt.id}"
           th:text="${response.receipt.id}"></a>
    </td>
    <td th:fragment="receipt-id(receipt)">
        <a class=" text-dark text-decoration-none"
           th:href="'/order/'+${receipt.id}"
           th:text="${receipt.id}"></a>
    </td>
    <td th:fragment="receipt-user(receipt)">
        <a class=" text-dark text-decoration-none"
           th:href="'/user/'+${receipt.user.id}+'/profile'"
           th:text="'@'+${receipt.user.username}"></a>
    </td>
    <td th:fragment="receipt-status(receipt)">
        <th:block th:switch="${receipt.status.name}">
            <span th:case="'CREATED'">Created</span>
            <span th:case="'WAIT_FOR_PAYMENT'">Wait for payment</span>
            <span th:case="'PAID'">Paid</span>
            <span th:case="'IN_WORK'">In work</span>
            <span th:case="'DONE'">Done</span>
            <span th:case="'CANCELED'">Canceled</span>
        </th:block>
    </td>
    <td th:fragment="receipt-master(receipt)" th:switch="${receipt.master} == null">
        <i class=" text-dark text-decoration-none"
           th:case="true">
            Not assigned
        </i>
        <a class=" text-dark text-decoration-none"
           th:case="*"
           th:href="'/user/'+${receipt.master.id}+'/profile'"
           th:text="'@'+${receipt.master.username}"></a>
    </td>
    <td th:fragment="receipt-category(receipt)" th:text="${receipt.category.name}">notebook</td>

    <td th:fragment="receipt-price(receipt)">
        <i th:text="${receipt.totalPrice}"></i>
        <i th:text="${receipt.priceCurrency.code}"></i>
    </td>

    <td th:fragment="receipt-creationDate(receipt)" th:text="${@thymeleafUtil.format(receipt.creationDate)}">
        14-01-2003
    </td>
    <td th:fragment="receipt-delivery(receipt)">
        <ul class="list-group">
            <li class="list-group-item" th:text="${receipt.delivery.country}">Ukraine</li>
            <li class="list-group-item" th:text="${receipt.delivery.city}">Kyiv</li>
        </ul>
    </td>
    <td th:fragment="receipt-action(receipt,flows)">
        <a class="btn btn-outline-primary" role="button" th:href="'/order/'+${receipt.id}">
            View
        </a>
        <a class="btn btn-outline-primary" role="button" th:if="${receipt.status.name} == 'WAIT_FOR_PAYMENT' " sec:authorize="hasRole('CUSTOMER')" th:href="'/order/'+${receipt.id}+'/pay'">
            Pay
        </a>
        <div class="dropdown">
            <a aria-expanded="false" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown"
               id="dropdownMenuLink"
               role="button">
                Status
            </a>
            <ul aria-labelledby="dropdownMenuLink" class="dropdown-menu">
                <th:block th:each="flow:${flows}">
                    <li th:if="${flow.fromStatus.id} == ${receipt.status.id}">
                        <form id="status-form" method="post" th:action="@{/order/{id}/status/change(id=${receipt.id})}">
                            <th:block th:switch="${flow.toStatus.name}">
                                <input name="statusId" th:value="${flow.toStatus.id}" type="hidden"/>
                                <button class="btn dropdown-item btn-outline-primary"
                                        role="button" th:case="'CREATED'"
                                        type="submit">Created
                                </button>
                                <button class="btn dropdown-item btn-outline-primary"
                                        role="button" th:case="'WAIT_FOR_PAYMENT'"
                                        type="submit">Wait for payment
                                </button>
                                <button class="btn dropdown-item btn-outline-primary"
                                        role="button" th:case="'PAID'"
                                        type="submit">Paid
                                </button>
                                <button class="btn dropdown-item btn-outline-primary"
                                        role="button" th:case="'IN_WORK'"
                                        type="submit">In work
                                </button>
                                <button class="btn dropdown-item btn-outline-primary"
                                        role="button" th:case="'DONE'"
                                        type="submit">Done
                                </button>
                                <button class="btn dropdown-item btn-outline-primary"
                                        role="button" th:case="'CANCELED'"
                                        type="submit">Canceled
                                </button>
                            </th:block>
                        </form>
                    </li>
                </th:block>
            </ul>
        </div>
    </td>
</th:block>